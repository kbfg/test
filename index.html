<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jay's Word Vault Pro</title>
    <link rel="manifest" href="manifest.json">
    <style>
        /* Revolut-style Clean & Bold Design */
        :root {
            --bg: #F2F4F8;
            --card-bg: #FFFFFF;
            --text-main: #191C1F;
            --text-sub: #8B959E;
            --blue: #0075EB; 
            --accent: #FF00BF;
            --green-bg: #E8F5E9; --green-text: #2E7D32;
            --red-bg: #FFEBEE; --red-text: #C62828;
            --purple-bg: #F3E5F5; --purple-text: #7B1FA2;
        }

        body {
            margin: 0;
            background-color: var(--bg);
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        header {
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .brand { font-size: 20px; font-weight: 800; color: var(--text-main); letter-spacing: -0.5px; }
        .counter { 
            font-size: 13px; font-weight: 700; color: white; 
            background: var(--text-main); padding: 6px 14px; border-radius: 20px; 
        }

        .viewport {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
        }

        .card {
            width: 100%;
            height: 100%;
            max-width: 380px;
            max-height: 620px;
            background: var(--card-bg);
            border-radius: 28px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.08);
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            position: absolute;
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.3s;
            overflow-y: auto;
            scrollbar-width: none;
        }
        .card::-webkit-scrollbar { display: none; }

        /* Sentence Area with Audio */
        .sentence-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 30px;
        }
        .sentence {
            font-size: 24px;
            font-weight: 800;
            line-height: 1.3;
            color: var(--text-main);
            letter-spacing: -0.8px;
        }
        .highlight {
            color: var(--blue);
            background: rgba(0, 117, 235, 0.08);
            padding: 2px 6px; border-radius: 6px;
        }
        .audio-btn {
            background: #F0F2F5;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            font-size: 20px;
            color: var(--blue);
            transition: 0.2s;
        }
        .audio-btn:active { transform: scale(0.9); background: #E1E4E8; }

        /* Quiz Section */
        .quiz-box { flex: 1; display: flex; flex-direction: column; gap: 12px; }
        .quiz-label { font-size: 12px; font-weight: 700; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        
        .option {
            padding: 18px;
            border: 2px solid #F5F7FA;
            border-radius: 18px;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-main);
            background: white;
            cursor: pointer;
            transition: 0.15s;
        }
        .option:active { transform: scale(0.98); }
        .option.correct { border-color: var(--blue); background: #F0F7FF; color: var(--blue); }
        .option.wrong { border-color: #FFCDD2; background: #FFEBEE; color: #C62828; }

        /* Details Section */
        .details {
            display: none;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px dashed #EEE;
            animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .tag-block { margin-bottom: 20px; }
        .tag-title { font-size: 11px; font-weight: 800; color: var(--text-sub); margin-bottom: 8px; display: block; }
        .tags { display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { padding: 8px 12px; border-radius: 10px; font-size: 14px; font-weight: 600; }
        .t-syn { background: var(--green-bg); color: var(--green-text); }
        .t-ant { background: var(--red-bg); color: var(--red-text); }
        .t-nuance { background: var(--purple-bg); color: var(--purple-text); width: 100%; line-height: 1.5; font-size: 15px; }

        .next-hint {
            position: absolute; bottom: 30px; width: 100%; text-align: center;
            font-size: 14px; color: #BBB; font-weight: 600; opacity: 0; transition: 0.3s;
            pointer-events: none;
        }
        
        .empty-state { text-align: center; display: none; flex-direction: column; align-items: center; justify-content: center; height: 100%; }
        .empty-emoji { font-size: 60px; margin-bottom: 20px; }
    </style>
</head>
<body>

    <header>
        <div class="brand">Jay's Vault</div>
        <div class="counter" id="progress">1 / 50</div>
    </header>

    <div class="viewport" id="cardArea"></div>
    <div class="next-hint" id="hint">Swipe Left ‚û°Ô∏è</div>

    <script>
        // =================================================================
        // üìö VOCABULARY DATA (US Grade 5-6 Tier 2 & Idioms)
        // Í≥µÏã†Î†• ÏûàÎäî Îç∞Ïù¥ÌÑ∞ Í∏∞Î∞ò (Common Core, Scholastic Word List)
        // =================================================================
        const vocabList = [
            // -----------------------------------------------------
            // 1. Academic Vocabulary (ÎØ∏Íµ≠ ÌïôÍµê ÏàòÏóÖ ÌïÑÏàò Ïñ¥Ìúò)
            // -----------------------------------------------------
            {
                s: "We need to **analyze** the problem carefully.",
                t: "analyze",
                m: "To study something closely",
                o: ["To guess wildly", "To study closely", "To ignore"],
                syn: ["Examine", "Inspect", "Investigate"],
                ant: ["Ignore", "Neglect"],
                n: "ÎåÄÏ∂© Î≥¥Îäî Í≤å ÏïÑÎãàÎùº, ÏÖúÎ°ù ÌôàÏ¶àÏ≤òÎüº ÌòÑÎØ∏Í≤ΩÏúºÎ°ú ÎúØÏñ¥Î≥¥Îäî ÎäêÎÇå."
            },
            {
                s: "Can you **elaborate** on your idea?",
                t: "elaborate",
                m: "To explain in greater detail",
                o: ["To stop talking", "To explain in detail", "To simplify"],
                syn: ["Expand", "Clarify", "Flesh out"],
                ant: ["Summarize", "Abbreviate"],
                n: "ÎÑàÎ¨¥ ÏßßÍ≤å ÎßêÌñàÏùÑ Îïå 'Ï¢Ä Îçî ÏûêÏÑ∏Ìûà(ÏÇ¥ÏùÑ Î∂ôÏó¨ÏÑú) ÎßêÌï¥Î¥ê'ÎùºÍ≥† Ìï† Îïå ÏîÄ."
            },
            {
                s: "The huge statue was truly **colossal**.",
                t: "colossal",
                m: "Extremely large",
                o: ["Very small", "Extremely large", "Colorful"],
                syn: ["Massive", "Gigantic", "Enormous"],
                ant: ["Tiny", "Miniature", "Minuscule"],
                n: "Í∑∏ÎÉ• ÌÅ∞(Big) Ï†ïÎèÑÍ∞Ä ÏïÑÎãàÎùº, 'Í±∞ÎåÄÌïú' Í±¥Îã¥Ïù¥ÎÇò ÎπåÎî©ÏùÑ Î≥º Îïå Ïì∞Îäî Îßê."
            },
            {
                s: "It is **crucial** that you wear a helmet.",
                t: "crucial",
                m: "Extremely important",
                o: ["Optional", "Extremely important", "Boring"],
                syn: ["Vital", "Essential", "Critical"],
                ant: ["Insignificant", "Optional"],
                n: "Ïù¥Í±∞ Ïïà ÌïòÎ©¥ ÌÅ∞Ïùº ÎÇòÎäî Í≤É. 'Í≤∞Ï†ïÏ†ÅÏúºÎ°ú Ï§ëÏöîÌïú' ÏÉÅÌô©."
            },
            {
                s: "The story is purely **fictional**.",
                t: "fictional",
                m: "Not real; made up",
                o: ["Based on facts", "Not real", "Scientific"],
                syn: ["Imaginary", "Fabricated"],
                ant: ["Real", "Factual", "Non-fiction"],
                n: "Ìï¥Î¶¨Ìè¨ÌÑ∞Ï≤òÎüº ÏûëÍ∞ÄÍ∞Ä ÏßÄÏñ¥ÎÇ∏ Ïù¥ÏïºÍ∏∞. (Î∞òÎåÄÎßê: Non-fiction)"
            },
            {
                s: "Please **specify** which color you want.",
                t: "specify",
                m: "To identify clearly and definitely",
                o: ["To guess", "To identify clearly", "To mix up"],
                syn: ["Define", "Designate", "Pinpoint"],
                ant: ["Generalize"],
                n: "Ïï†Îß§ÌïòÍ≤å 'Í∑∏Í±∞' ÌïòÏßÄ ÎßêÍ≥†, 'Îπ®Í∞ÑÏÉâ ÏïÑÏù¥Ìè∞ 15'ÎùºÍ≥† Îî± ÏßëÏñ¥ ÎßêÌïòÎäî Í≤É."
            },
            {
                s: "He tried to **manipulate** the controller.",
                t: "manipulate",
                m: "To handle or control skilledly",
                o: ["To break", "To control skillfully", "To look at"],
                syn: ["Operate", "Maneuver", "Influence"],
                ant: ["Leave alone"],
                n: "ÏÜêÏúºÎ°ú Í∏∞Í≥ÑÎ•º Ïûò Îã§Î£®Í±∞ÎÇò, ÏÇ¨ÎûåÏùò ÎßàÏùåÏùÑ ÎÇ¥ ÎßòÎåÄÎ°ú Ï°∞Ï¢ÖÌï† ÎïåÎèÑ ÏîÄ."
            },
            {
                s: "The heavy rain was **continuous** all day.",
                t: "continuous",
                m: "Going on without stopping",
                o: ["Stopping often", "Without stopping", "Very fast"],
                syn: ["Uninterrupted", "Constant", "Ceaseless"],
                ant: ["Intermittent", "Occasional"],
                n: "ÎÅäÍ∏∞ÏßÄ ÏïäÍ≥† Ï≠â Ïù¥Ïñ¥ÏßÄÎäî Í≤É. (Ïú†ÌäúÎ∏å Î°úÎî© ÏóÜÏù¥ Ï≠â Î≥º ÎïåÏ≤òÎüº)"
            },
            {
                s: "I am **optimistic** about winning the game.",
                t: "optimistic",
                m: "Hopeful and confident about the future",
                o: ["Sad and depressed", "Hopeful/Confident", "Angry"],
                syn: ["Positive", "Cheerful"],
                ant: ["Pessimistic", "Negative"],
                n: "Î¨¥Ï°∞Í±¥ Ïûò Îê† Í±∞ÎùºÍ≥† ÎØøÎäî Í∏çÏ†ïÏ†ÅÏù∏ ÎßàÏù∏Îìú. (Î∞òÎåÄÎßê: Pessimistic ÏóºÏÑ∏Ï†ÅÏù∏)"
            },
            {
                s: "This strategy is **equivalent** to cheating.",
                t: "equivalent",
                m: "Equal in value or amount",
                o: ["Different", "Equal", "Better"],
                syn: ["Same", "Identical", "Comparable"],
                ant: ["Different", "Unequal"],
                n: "Í∞ÄÏπòÎäî Îã§Î•¥ÏßÄÎßå Í≤∞Í≥ºÏ†ÅÏúºÎ°úÎäî 'Ïå§Ïå§(Same)'Ïù¥ÎùºÎäî Îúª."
            },

            // -----------------------------------------------------
            // 2. Real-life Idioms (ÎØ∏Íµ≠ Ï¥àÎì± Í≥†ÌïôÎÖÑ~Ï§ëÎì± ÌïÑÏàò ÏàôÏñ¥)
            // -----------------------------------------------------
            {
                s: "Wow, you really **hit the nail on the head**!",
                t: "hit the nail on the head",
                m: "To describe exactly what is causing a situation",
                o: ["To build something", "To be exactly right", "To hurt your finger"],
                syn: ["Spot on", "Get it right"],
                ant: ["Miss the point"],
                n: "Ï†ïÍ≥°ÏùÑ Ï∞åÎ•¥Îã§! ÌïµÏã¨ÏùÑ ÏôÑÎ≤ΩÌïòÍ≤å ÎßûÏ∑ÑÏùÑ Îïå Ïì∞Îäî ÏµúÍ≥†Ïùò Ïπ≠Ï∞¨."
            },
            {
                s: "Don't worry, **break a leg** out there!",
                t: "break a leg",
                m: "Good luck (usually for performance)",
                o: ["Get hurt", "Good luck", "Run fast"],
                syn: ["Good luck", "Best wishes"],
                ant: ["Bad luck"],
                n: "Í≥µÏó∞Ïù¥ÎÇò ÏãúÌï© ÎÇòÍ∞ÄÎäî ÏπúÍµ¨ÌïúÌÖå 'ÌñâÏö¥ÏùÑ ÎπåÏñ¥!'ÎùºÍ≥† Ìï† Îïå ÏîÄ. (Îã§Î¶¨ Î∂ÄÎü¨ÏßÄÎûÄ Îúª ÏïÑÎãò!)"
            },
            {
                s: "Stop checking your phone **once in a blue moon**.",
                t: "once in a blue moon",
                m: "Very rarely",
                o: ["Every day", "Very rarely", "At night"],
                syn: ["Rarely", "Hardly ever"],
                ant: ["Frequently", "Often"],
                n: "ÌååÎûÄ Îã¨ÏùÄ Í±∞Ïùò Ïïà Îú®ÏßÄ? 'Í∞ÄÎ≠ÑÏóê ÏΩ© ÎÇòÎìØ' ÏïÑÏ£º Í∞ÄÎÅî ÏùºÏñ¥ÎÇòÎäî Ïùº."
            },
            {
                s: "I decided to **bite the bullet** and tell the truth.",
                t: "bite the bullet",
                m: "To endure a painful situation bravely",
                o: ["To eat metal", "To endure bravely", "To shoot"],
                syn: ["Face the music", "Tough it out"],
                ant: ["Avoid", "Chicken out"],
                n: "ÌîºÌïòÍ≥† Ïã∂ÏßÄÎßå Íæπ Ï∞∏Í≥† Ïö©Í∏∞ ÎÇ¥ÏÑú ÌïòÍ∏∞ Ïã´ÏùÄ ÏùºÏùÑ Ìï† Îïå."
            },
            {
                s: "He let the **cat out of the bag** about the party.",
                t: "cat out of the bag",
                m: "To reveal a secret by mistake",
                o: ["To lose a pet", "To reveal a secret", "To buy a bag"],
                syn: ["Spill the beans", "Reveal"],
                ant: ["Keep a secret"],
                n: "ÎπÑÎ∞ÄÏùÑ Ïã§ÏàòÎ°ú ÎàÑÏÑ§Ìï¥Î≤ÑÎ†∏ÏùÑ Îïå. (Í∞ÄÎ∞© ÏïàÏóê Î™∞Îûò ÎÑ£ÏùÄ Í≥†ÏñëÏù¥Í∞Ä ÌäÄÏñ¥ÎÇòÏò¥)"
            },
            {
                s: "That computer costs **an arm and a leg**.",
                t: "an arm and a leg",
                m: "To be very expensive",
                o: ["Very cheap", "Very expensive", "Body parts"],
                syn: ["Cost a fortune", "Pricey"],
                ant: ["Dirt cheap", "A bargain"],
                n: "ÎÇ¥ ÌåîÎã§Î¶¨Î•º ÎÇ¥Ï§òÏïº Ìï† Ï†ïÎèÑÎ°ú ÏóÑÏ≤≠ÎÇòÍ≤å ÎπÑÏã∏Îã§Îäî Îúª."
            },
            {
                s: "I'm feeling a bit **under the weather** today.",
                t: "under the weather",
                m: "Feeling slightly sick",
                o: ["Feeling happy", "Feeling sick", "Looking at rain"],
                syn: ["Unwell", "Sick"],
                ant: ["Fit as a fiddle"],
                n: "Ïã¨Ìïú Î≥ëÏùÄ ÏïÑÎãàÍ≥†, Î™∏ÏÇ¥ Í∏∞Ïö¥Ïù¥ÎÇò Ïª®ÎîîÏÖòÏù¥ Î≥ÑÎ°úÏùº Îïå."
            },
            {
                s: "Let's **cut to the chase** and talk about the price.",
                t: "cut to the chase",
                m: "To get to the point without wasting time",
                o: ["Run away", "Get to the point", "Watch a movie"],
                syn: ["Get to the point"],
                ant: ["Beat around the bush"],
                n: "ÏòÅÌôîÏóêÏÑú ÏßÄÎ£®Ìïú Î∂ÄÎ∂Ñ ÏûêÎ•¥Í≥† Ï∂îÍ≤©Ï†Ñ(Chase)ÏúºÎ°ú Î∞îÎ°ú Í∞ÄÏûê! Ï¶â, Î≥∏Î°†Îßå ÎßêÌï¥."
            },
            {
                s: "It's not **rocket science**, you can do it.",
                t: "rocket science",
                m: "Something very difficult to understand",
                o: ["Easy thing", "Very difficult thing", "Space travel"],
                syn: ["Complicated"],
                ant: ["Piece of cake"],
                n: "Î°úÏºì Í≥ºÌïôÎßåÌÅº Ïñ¥Î†µÏßÄ ÏïäÏïÑ. Ï¶â, 'ÎÑàÎèÑ Ï∂©Î∂ÑÌûà Ïù¥Ìï¥Ìï† Ïàò ÏûàÏñ¥, Ï´ÑÏßÄ Îßà'ÎùºÎäî Îúª."
            },
            {
                s: "Just **hang in there**, vacation is coming soon.",
                t: "hang in there",
                m: "Don't give up",
                o: ["Let go", "Don't give up", "Climb a tree"],
                syn: ["Persist", "Keep going"],
                ant: ["Give up", "Quit"],
                n: "ÌûòÎì§Ïñ¥ÎèÑ Ï°∞Í∏àÎßå Îçî Î≤ÑÌÖ®! (Ï†àÎ≤ΩÏóê Îß§Îã¨Î†§ ÏûàÎäî ÏÇ¨Îûå ÏùëÏõêÌïòÎäî ÎäêÎÇå)"
            }
        ];

        // =================================================================
        // ‚öôÔ∏è SYSTEM LOGIC (TTS, Quiz, Swipe)
        // =================================================================
        let idx = 0;
        const cardArea = document.getElementById('cardArea');
        const progress = document.getElementById('progress');
        const hint = document.getElementById('hint');
        
        function render() {
            if (idx >= vocabList.length) {
                cardArea.innerHTML = `<div class='empty-state'><div class='empty-emoji'>üéâ</div><h3>All Done for today!</h3><p style='color:#888'>Great job, Jay!</p></div>`;
                hint.style.opacity = 0;
                return;
            }

            const item = vocabList[idx];
            
            // Highlight Target Word
            const sentenceHTML = item.s.replace(`**${item.t}**`, `<span class='highlight'>${item.t}</span>`);
            
            // Randomize Options
            let options = item.o.map(opt => ({ txt: opt, isCor: opt === item.m }));
            options.sort(() => Math.random() - 0.5);

            const el = document.createElement('div');
            el.className = 'card';
            el.innerHTML = `
                <div class="sentence-row">
                    <div class="sentence">${sentenceHTML}</div>
                    <button class="audio-btn" onclick="speak('${item.s.replace(/'/g, "\\'")}')">üîä</button>
                </div>
                
                <div class="quiz-box" id="quizBox">
                    <div class="quiz-label">What does "${item.t}" mean?</div>
                    ${options.map(o => `<div class="option" onclick="check(this, ${o.isCor})">${o.txt}</div>`).join('')}
                </div>

                <div class="details" id="details">
                    <div class="tag-block">
                        <span class="tag-title">JAY'S NOTE (NUANCE)</span>
                        <div class="tag t-nuance">${item.n}</div>
                    </div>
                    <div class="tag-block">
                        <span class="tag-title">SYNONYMS</span>
                        <div class="tags">
                            ${item.syn.map(s => `<div class="tag t-syn">${s}</div>`).join('')}
                        </div>
                    </div>
                    <div class="tag-block">
                        <span class="tag-title">ANTONYMS</span>
                        <div class="tags">
                            ${item.ant.map(a => `<div class="tag t-ant">${a}</div>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            cardArea.innerHTML = '';
            cardArea.appendChild(el);
            progress.textContent = `${idx + 1} / ${vocabList.length}`;
            hint.style.opacity = 0;
        }

        // üîä TTS Function
        window.speak = (text) => {
            // Remove markdown asterisks for speech
            const cleanText = text.replace(/\*\*/g, "");
            
            window.speechSynthesis.cancel(); // Stop previous
            const utterance = new SpeechSynthesisUtterance(cleanText);
            utterance.lang = 'en-US';
            utterance.rate = 0.9; // Slightly slower for clarity
            utterance.pitch = 1;
            window.speechSynthesis.speak(utterance);
        };

        window.check = (btn, isCorrect) => {
            const allBtns = document.querySelectorAll('.option');
            allBtns.forEach(b => b.onclick = null); // Prevent double click

            if (isCorrect) {
                btn.classList.add('correct');
                showDetails();
            } else {
                btn.classList.add('wrong');
                allBtns.forEach(b => {
                    if (b.textContent === vocabList[idx].m) b.classList.add('correct');
                });
                showDetails();
            }
        };

        function showDetails() {
            const details = document.getElementById('details');
            details.style.display = 'block';
            
            // Auto-scroll to details
            setTimeout(() => {
                const card = document.querySelector('.card');
                card.scrollTo({ top: card.scrollHeight, behavior: 'smooth' });
                hint.style.opacity = 1;
            }, 100);
        }

        // Swipe Logic
        let startX = 0;
        let endX = 0;

        document.addEventListener('touchstart', e => {
            startX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            endX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const details = document.getElementById('details');
            // Only allow swipe if details are shown (Quiz finished)
            if (!details || details.style.display === 'none') return;

            if (startX - endX > 50) { // Swipe Left
                nextCard();
            }
        }

        function nextCard() {
            const card = document.querySelector('.card');
            card.style.transform = 'translateX(-120%) rotate(-5deg)';
            card.style.opacity = '0';
            
            setTimeout(() => {
                idx++;
                render();
            }, 300);
        }

        // Init
        render();

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>

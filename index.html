<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jay's English Hub</title>
    <link rel="manifest" href="manifest.json">
    <style>
        /* Jayë¥¼ ìœ„í•œ ê¹”ë”í•˜ê³  ìŠ¤í¬í‹°í•œ ë””ìì¸ */
        :root {
            --primary: #2C3E50;
            --accent: #E74C3C; /* ì¶•êµ¬/ìì „ê±°ì˜ ì—´ì •ì ì¸ ë ˆë“œ */
            --bg: #F0F2F5;
            --card-bg: #FFFFFF;
        }
        body {
            margin: 0;
            background-color: var(--bg);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* ìƒë‹¨ ì¹´í…Œê³ ë¦¬ íƒ­ */
        .tabs {
            display: flex;
            width: 100%;
            background: white;
            padding: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            justify-content: center;
            gap: 10px;
        }
        .tab-btn {
            border: none;
            background: #eee;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            color: #777;
            cursor: pointer;
            transition: 0.2s;
        }
        .tab-btn.active {
            background-color: var(--primary);
            color: white;
        }

        /* ë©”ì¸ ì¹´ë“œ ì˜ì—­ */
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            width: 90%;
            max-width: 400px;
        }
        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .card:active { transform: scale(0.98); }
        
        /* í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .category-label {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 12px;
            background: #eee;
            padding: 4px 10px;
            border-radius: 10px;
            color: #555;
            font-weight: bold;
        }
        .english {
            font-size: 26px;
            font-weight: 800;
            color: #333;
            line-height: 1.4;
            margin-bottom: 20px;
        }
        .korean {
            font-size: 18px;
            color: var(--accent);
            font-weight: 600;
            display: none; /* ì •ë‹µ ê°€ë¦¬ê¸° */
            margin-top: 15px;
            border-top: 2px dashed #eee;
            padding-top: 15px;
            width: 100%;
        }

        /* ë²„íŠ¼ ì»¨íŠ¸ë¡¤ */
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }
        .circle-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }
        .btn-speak { background: #3498DB; color: white; }
        .btn-next { background: var(--primary); color: white; }
        .btn-shuffle { background: #F1C40F; color: white; font-size: 20px; }

        .guide { margin-top: 20px; font-size: 13px; color: #888; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="setCategory('all')">All</button>
        <button class="tab-btn" onclick="setCategory('soccer')">Soccer âš½ï¸</button>
        <button class="tab-btn" onclick="setCategory('bike')">Cycling ğŸš´</button>
        <button class="tab-btn" onclick="setCategory('life')">Life ğŸ’¬</button>
    </div>

    <div class="container">
        <div class="card" onclick="toggleAnswer()">
            <div id="catLabel" class="category-label">Topic</div>
            <div id="englishText" class="english">Ready Jay?</div>
            <div id="koreanText" class="korean">í„°ì¹˜í•˜ë©´ í•´ì„ì´ ë‚˜ì™€ìš”!</div>
        </div>

        <div class="controls">
            <button class="circle-btn btn-shuffle" onclick="toggleShuffle()">ğŸ”€</button>
            <button class="circle-btn btn-speak" onclick="speakText()">ğŸ”Š</button>
            <button class="circle-btn btn-next" onclick="nextCard()">â¡ï¸</button>
        </div>
        <p class="guide" id="progressText">1 / 10</p>
    </div>

    <script>
        // ==========================================
        // âœï¸ Jayë¥¼ ìœ„í•œ ë°ì´í„° (ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ë©´ ë¨)
        // ==========================================
        const allData = [
            // âš½ï¸ ì¶•êµ¬ (Soccer)
            { cat: 'soccer', en: "What an amazing goal by Son!", ko: "ì†í¥ë¯¼ ê³¨ ì§„ì§œ ë©‹ì§€ì§€ ì•Šì•˜ì–´?" },
            { cat: 'soccer', en: "He is the best striker in the league.", ko: "ê·¸ëŠ” ë¦¬ê·¸ ìµœê³ ì˜ ê³µê²©ìˆ˜ì•¼." },
            { cat: 'soccer', en: "Did you see that pass?", ko: "ë°©ê¸ˆ ê·¸ íŒ¨ìŠ¤ ë´¤ì–´?" },
            
            // ğŸš´ ìì „ê±° (Bike)
            { cat: 'bike', en: "This carbon frame is super light.", ko: "ì´ ì¹´ë³¸ í”„ë ˆì„ ì§„ì§œ ê°€ë³ë‹¤." },
            { cat: 'bike', en: "Can you help me check the tire pressure?", ko: "íƒ€ì´ì–´ ê³µê¸°ì•• ì²´í¬ ì¢€ ë„ì™€ì¤„ë˜?" },
            { cat: 'bike', en: "Riding uphill builds your endurance.", ko: "ì˜¤ë¥´ë§‰ ì£¼í–‰ì€ ì§€êµ¬ë ¥ì„ ê¸¸ëŸ¬ì¤˜." },

            // ğŸ’¬ ì¼ìƒ/ìœ í•™ (Life)
            { cat: 'life', en: "I'm looking forward to the field trip.", ko: "í˜„ì¥ í•™ìŠµ ì§„ì§œ ê¸°ëŒ€ë¼ìš”." },
            { cat: 'life', en: "Can I hang out with my friends?", ko: "ì¹œêµ¬ë“¤ì´ë‘ ë†€ì•„ë„ ë¼ìš”?" },
            { cat: 'life', en: "What's the Wi-Fi password?", ko: "ì™€ì´íŒŒì´ ë¹„ë²ˆì´ ë­ì˜ˆìš”?" }
        ];

        // ==========================================
        // âš™ï¸ ì•± ì‘ë™ ë¡œì§
        // ==========================================
        let currentList = [...allData]; // í˜„ì¬ ì„ íƒëœ ë¦¬ìŠ¤íŠ¸
        let currentIndex = 0;
        let isShuffle = false;

        const enEl = document.getElementById('englishText');
        const koEl = document.getElementById('koreanText');
        const catEl = document.getElementById('catLabel');
        const progressEl = document.getElementById('progressText');

        // ì´ˆê¸°í™”
        function showCard() {
            if (currentList.length === 0) return;
            
            // ì¸ë±ìŠ¤ ë²”ìœ„ ì²´í¬
            if (currentIndex >= currentList.length) currentIndex = 0;

            const data = currentList[currentIndex];
            enEl.textContent = data.en;
            koEl.textContent = data.ko;
            
            // ì¹´í…Œê³ ë¦¬ ë¼ë²¨ ê¾¸ë¯¸ê¸°
            let emoji = '';
            if(data.cat === 'soccer') emoji = 'âš½ï¸';
            if(data.cat === 'bike') emoji = 'ğŸš´';
            if(data.cat === 'life') emoji = 'ğŸ’¬';
            catEl.textContent = emoji + " " + data.cat.toUpperCase();

            koEl.style.display = 'none'; // ì •ë‹µ ìˆ¨ê¹€
            updateProgress();
        }

        // ì •ë‹µ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°
        function toggleAnswer() {
            koEl.style.display = (koEl.style.display === 'none') ? 'block' : 'none';
        }

        // ë‹¤ìŒ ì¹´ë“œë¡œ
        function nextCard() {
            if (isShuffle) {
                currentIndex = Math.floor(Math.random() * currentList.length);
            } else {
                currentIndex++;
            }
            showCard();
        }

        // ğŸ”Š ë“£ê¸° ê¸°ëŠ¥ (TTS) - ì—¬ê¸°ê°€ í•µì‹¬!
        function speakText() {
            const text = enEl.textContent;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US'; // ë¯¸êµ­ì‹ ë°œìŒ
            utterance.rate = 0.9; // ì•½ê°„ ì²œì²œíˆ ë˜ë°•ë˜ë°•
            window.speechSynthesis.speak(utterance);
        }

        // ì¹´í…Œê³ ë¦¬ ë³€ê²½ íƒ­
        function setCategory(cat) {
            // ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ UI
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // ë°ì´í„° í•„í„°ë§
            if (cat === 'all') {
                currentList = [...allData];
            } else {
                currentList = allData.filter(item => item.cat === cat);
            }
            currentIndex = 0;
            showCard();
        }

        // ì…”í”Œ í† ê¸€
        function toggleShuffle() {
            isShuffle = !isShuffle;
            const btn = document.querySelector('.btn-shuffle');
            btn.style.opacity = isShuffle ? "1" : "0.5";
            alert(isShuffle ? "ğŸ”€ ëœë¤ ëª¨ë“œ ì‹œì‘!" : "â¡ï¸ ìˆœì„œëŒ€ë¡œ ë³´ê¸°");
        }

        function updateProgress() {
            progressEl.textContent = `${currentIndex + 1} / ${currentList.length}`;
        }

        // ì‹œì‘
        showCard();

        // PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
